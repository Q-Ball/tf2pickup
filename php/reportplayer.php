<?phpinclude "dbinfo.php";$name = preg_replace("/[^0-9]/", "", $_GET['name']);$team = preg_replace("/[^a-z0-9_-]+/i", "", $_GET['team']);$gameurl = preg_replace("/[^A-Za-z0-9]/", "", $_GET['gameurl']);//	check if the variables were not passedif ( !isset($name) or !isset($team) or !isset($gameurl) ) {	return false;}else { // if values are passed	$db = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass); // connect to the database    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);	$query = $db->query("SELECT * FROM subs WHERE gameurl='$gameurl'"); // search for player name/nick of certain class/team	$resultsubs = $query->fetchAll(PDO::FETCH_ASSOC); $resultsubs = array_filter($resultsubs); print_r($resultsubs);// fetch results		if (empty($resultsubs)) { // if there's no gameurl like that in the table		echo "there's no gameurl like that in the table";		$valredscout = $valredsoldier = $valredpyro = $valreddemoman = $valredheavy = $valredengineer = $valredmedic = $valredsniper = $valredspy = $valbluescout = $valbluesoldier = $valbluepyro = $valbluedemoman = $valblueheavy = $valblueengineer = $valbluemedic = $valbluesniper = $valbluespy = 0;		echo $team;		if ($team == 'red_scout') { $valredscout = $valredscout + 1;}		if ($team == 'red_soldier') { $valredsoldier = $valredsoldier + 1;}		if ($team == 'red_pyro') { $valredpyro = $valredpyro + 1;}		if ($team == 'red_demoman') { $valreddemoman = $valreddemoman + 1;}		if ($team == 'red_heavy') { $valredheavy = $valredheavy + 1;}		if ($team == 'red_engineer') { $valredengineer = $valredengineer + 1;}		if ($team == 'red_medic') { $valredmedic = $valredmedic + 1;}		if ($team == 'red_sniper') { $valredsniper = $valredsniper + 1;}		if ($team == 'red_spy') { $valredspy = $valredspy + 1;}		if ($team == 'blue_scout') { $valbluescout = $valbluescout + 1;}		if ($team == 'blue_soldier') { $valbluesoldier = $valbluesoldier + 1;}		if ($team == 'blue_pyro') { $valbluepyro = $valbluepyro + 1;}		if ($team == 'blue_demoman') { $valbluedemoman = $valbluedemoman + 1;}		if ($team == 'blue_heavy') { $valblueheavy = $valblueheavy + 1;}		if ($team == 'blue_engineer') { $valblueengineer = $valblueengineer + 1;}		if ($team == 'blue_medic') { $valbluemedic = $valbluemedic + 1;}		if ($team == 'blue_sniper') { $valbluesniper = $valbluesniper + 1;}		if ($team == 'blue_spy') { $valbluespy = $valbluespy + 1;}		try {			$query = $db->query("INSERT INTO subs (red_scout, red_soldier, red_pyro, red_demoman, red_heavy, red_engineer, red_medic, red_sniper, red_spy, blue_scout, blue_soldier, blue_pyro, blue_demoman, blue_heavy, blue_engineer, blue_medic, blue_sniper, blue_spy, gameurl) VALUES ('$valredscout', '$valredsoldier', '$valredpyro', '$valreddemoman', '$valredheavy', '$valredengineer', '$valredmedic', '$valredsniper', '$valredspy', '$valbluescout', '$valbluesoldier', '$valbluepyro', '$valbluedemoman', '$valblueheavy', '$valblueengineer', '$valbluemedic', '$valbluesniper', '$valbluespy', '$gameurl')");		}		catch (PDOException $e){			echo $e->getMessage();		}	}	else {		echo "there's a gameurl like that in the table";		$resultsubs[0][$team] = $resultsubs[0][$team] + 1;		$query = $db->query("UPDATE subs SET $team='".$resultsubs[0][$team]."' WHERE gameurl='$gameurl'");	}}?>